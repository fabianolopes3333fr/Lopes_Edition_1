{% extends 'accounts/../accounts/base_auth.html' %}
{% load socialaccount %}

{% block title %}Création de compte Google - Lopes Peinture{% endblock %}

{% block content %}
<div class="text-center mb-8">
  <div class="mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4">
    <i class="fas fa-user-plus text-green-600 text-2xl"></i>
  </div>
  
  <h2 class="text-2xl font-bold text-gray-800 mb-2">Finaliser votre inscription</h2>
  <p class="text-gray-600 mb-6">Complétez votre profil pour terminer l'inscription</p>
</div>

{% if form.errors %}
<div class="mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg">
  <div class="flex">
    <div class="flex-shrink-0">
      <i class="fas fa-exclamation-circle text-red-500"></i>
    </div>
    <div class="ml-3">
      <h3 class="text-sm font-medium text-red-800">Erreurs de validation</h3>
      <div class="mt-2 text-sm text-red-700">
        {% for field, errors in form.errors.items %}
          {% for error in errors %}
            <p>{{ error }}</p>
          {% endfor %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endif %}

<form method="post" class="space-y-6">
  {% csrf_token %}
  
  {% if form.email %}
  <div>
    <label for="{{ form.email.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
      <i class="fas fa-envelope mr-2"></i>Email
    </label>
    <div class="relative">
      {{ form.email }}
      {% if form.email.errors %}
      <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
        <i class="fas fa-exclamation-circle text-red-500"></i>
      </div>
      {% endif %}
    </div>
    {% if form.email.errors %}
    <p class="mt-1 text-sm text-red-600">{{ form.email.errors.0 }}</p>
    {% endif %}
  </div>
  {% endif %}
  
  {% if form.username %}
  <div>
    <label for="{{ form.username.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
      <i class="fas fa-user mr-2"></i>Nom d'utilisateur
    </label>
    <div class="relative">
      {{ form.username }}
      {% if form.username.errors %}
      <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
        <i class="fas fa-exclamation-circle text-red-500"></i>
      </div>
      {% endif %}
    </div>
    {% if form.username.errors %}
    <p class="mt-1 text-sm text-red-600">{{ form.username.errors.0 }}</p>
    {% endif %}
  </div>
  {% endif %}

  <!-- Campos ocultos -->
  {% for field in form %}
    {% if field.name not in 'email,username' %}
      {{ field.as_hidden }}
    {% endif %}
  {% endfor %}

    <button 
    type="submit" 
    class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition duration-200"
  >
    <i class="fas fa-user-plus mr-2"></i>
    Créer mon compte
  </button>
</form>

<div class="mt-6 text-center">
  <p class="text-xs text-gray-500">
    En créant votre compte, vous acceptez nos 
    <a href="#" class="text-blue-600 hover:text-blue-500">conditions d'utilisation</a> 
    et notre 
    <a href="#" class="text-blue-600 hover:text-blue-500">politique de confidentialité</a>.
  </p>
</div>
{% endblock %}

{% block navigation_links %}
<p class="text-blue-100">
  Déjà un compte ?
  <a href="{% url 'accounts:login' %}" class="text-white font-medium hover:underline">
    Se connecter
  </a>
</p>
<p class="mt-2">
  <a href="{% url 'home:home' %}" class="text-blue-200 hover:text-white transition duration-200">
    <i class="fas fa-arrow-left mr-1"></i>
    Retour à l'accueil
  </a>
</p>
{% endblock %}