{% extends 'base_dashboard.html' %}
{% load static %}

{% block title %}Deletar Cliente - LOPES PEINTURE{% endblock %}

{% block content %}
<div class="content-wrapper">
    <!-- Header da P√°gina -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
            <div>
                <h1 class="text-2xl font-bold text-gray-900 flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-exclamation-triangle text-white text-lg"></i>
                    </div>
                    Deletar Cliente
                </h1>
                <p class="text-red-600 mt-1 font-medium">‚ö†Ô∏è Esta a√ß√£o n√£o pode ser desfeita</p>
            </div>
            <a href="{% url 'clientes:detalhe_cliente' cliente.pk %}"
               class="bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-6 py-3 rounded-lg font-medium flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
                <i class="fas fa-arrow-left"></i>
                Voltar
            </a>
        </div>
    </div>

    <!-- Card de Confirma√ß√£o -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-8">
        <div class="text-center">
            <!-- √çcone de Aviso -->
            <div class="mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-gradient-to-br from-red-100 to-red-200 border-4 border-red-300 mb-6">
                <i class="fas fa-exclamation-triangle text-red-600 text-3xl"></i>
            </div>

            <h3 class="text-2xl font-bold text-gray-900 mb-6">
                Tem certeza que deseja deletar este cliente?
            </h3>

            <!-- Informa√ß√µes do Cliente -->
            <div class="bg-gray-50 border border-gray-200 rounded-lg p-6 mb-6 text-left">
                <div class="flex items-center gap-3 mb-6 pb-4 border-b border-gray-200">
                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-user text-blue-600"></i>
                    </div>
                    <h4 class="text-xl font-bold text-gray-900">{{ cliente.nom_complet }}</h4>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="flex items-center gap-2 text-sm">
                        <div class="w-6 h-6 bg-gray-100 rounded flex items-center justify-center">
                            <i class="fas fa-hashtag text-gray-600 text-xs"></i>
                        </div>
                        <span class="text-gray-600"><strong>C√≥digo:</strong> {{ cliente.code }}</span>
                    </div>

                    {% if cliente.email %}
                    <div class="flex items-center gap-2 text-sm">
                        <div class="w-6 h-6 bg-blue-100 rounded flex items-center justify-center">
                            <i class="fas fa-envelope text-blue-600 text-xs"></i>
                        </div>
                        <span class="text-gray-600"><strong>Email:</strong> {{ cliente.email }}</span>
                    </div>
                    {% endif %}

                    {% if cliente.telephone %}
                    <div class="flex items-center gap-2 text-sm">
                        <div class="w-6 h-6 bg-green-100 rounded flex items-center justify-center">
                            <i class="fas fa-phone text-green-600 text-xs"></i>
                        </div>
                        <span class="text-gray-600"><strong>Telefone:</strong> {{ cliente.telephone }}</span>
                    </div>
                    {% endif %}

                    <div class="flex items-center gap-2 text-sm">
                        <div class="w-6 h-6 bg-purple-100 rounded flex items-center justify-center">
                            <i class="fas fa-flag text-purple-600 text-xs"></i>
                        </div>
                        <span class="text-gray-600"><strong>Status:</strong> {{ cliente.get_status_display }}</span>
                    </div>

                    <div class="flex items-center gap-2 text-sm">
                        <div class="w-6 h-6 bg-red-100 rounded flex items-center justify-center">
                            <i class="fas fa-map-marker-alt text-red-600 text-xs"></i>
                        </div>
                        <span class="text-gray-600"><strong>Cidade:</strong> {{ cliente.ville }}, {{ cliente.pays }}</span>
                    </div>

                    {% if cliente.activite %}
                    <div class="flex items-center gap-2 text-sm">
                        <div class="w-6 h-6 bg-orange-100 rounded flex items-center justify-center">
                            <i class="fas fa-briefcase text-orange-600 text-xs"></i>
                        </div>
                        <span class="text-gray-600"><strong>Atividade:</strong> {{ cliente.activite }}</span>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Aviso de Perigo -->
            <div class="bg-gradient-to-r from-red-50 to-red-100 border border-red-200 border-l-4 border-l-red-500 rounded-lg p-6 mb-6">
                <div class="flex items-start gap-3">
                    <div class="flex-shrink-0">
                        <i class="fas fa-exclamation-circle text-red-600 text-lg"></i>
                    </div>
                    <div class="text-left">
                        <h3 class="text-sm font-bold text-red-800 mb-3">
                            üö® ATEN√á√ÉO: Esta a√ß√£o ir√° deletar permanentemente:
                        </h3>
                        <ul class="list-disc list-inside space-y-2 text-sm text-red-700">
                            <li><strong>Todas as informa√ß√µes do cliente</strong> (dados pessoais e comerciais)</li>
                            <li><strong>Endere√ßos de entrega:</strong> {{ cliente.adresses_livraison.count }} registro(s)</li>
                            <li><strong>Endere√ßos de transportador:</strong> {{ cliente.adresses_transporteur.count }} registro(s)</li>
                            <li><strong>Endere√ßos de obra:</strong> {{ cliente.adresses_chantier.count }} registro(s)</li>
                            <li><strong>Tarifas TVA espec√≠ficas:</strong> {{ cliente.tarifs_tva.count }} registro(s)</li>
                            <li><strong>Hist√≥rico de cria√ß√£o e modifica√ß√µes</strong></li>
                        </ul>

                        <!-- Estat√≠sticas -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-4">
                            <div class="bg-amber-100 border border-amber-300 rounded-lg p-3 text-center">
                                <div class="text-lg font-bold text-amber-800">{{ cliente.adresses_livraison.count }}</div>
                                <div class="text-xs text-amber-700 font-medium">Endere√ßos Entrega</div>
                            </div>
                            <div class="bg-amber-100 border border-amber-300 rounded-lg p-3 text-center">
                                <div class="text-lg font-bold text-amber-800">{{ cliente.adresses_transporteur.count }}</div>
                                <div class="text-xs text-amber-700 font-medium">Transportadores</div>
                            </div>
                            <div class="bg-amber-100 border border-amber-300 rounded-lg p-3 text-center">
                                <div class="text-lg font-bold text-amber-800">{{ cliente.adresses_chantier.count }}</div>
                                <div class="text-xs text-amber-700 font-medium">Endere√ßos Obra</div>
                            </div>
                            <div class="bg-amber-100 border border-amber-300 rounded-lg p-3 text-center">
                                <div class="text-lg font-bold text-amber-800">{{ cliente.tarifs_tva.count }}</div>
                                <div class="text-xs text-amber-700 font-medium">Tarifas TVA</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Aviso Final -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8">
                <p class="text-sm text-blue-800 flex items-center justify-center gap-2">
                    <i class="fas fa-info-circle text-blue-600"></i>
                    <strong>Esta a√ß√£o n√£o pode ser desfeita.</strong> Todos os dados relacionados ser√£o permanentemente removidos do sistema.
                </p>
            </div>
        </div>

        <!-- Formul√°rio de Confirma√ß√£o -->
        <form method="post" class="flex flex-col sm:flex-row justify-center gap-4">
            {% csrf_token %}
            <a href="{% url 'clientes:detalhe_cliente' cliente.pk %}"
               class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-8 py-3 rounded-lg font-medium transition-all duration-200 text-center border border-gray-300 flex items-center justify-center gap-2">
                <i class="fas fa-times"></i>
                Cancelar
            </a>
            <button type="submit"
                    class="bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white px-8 py-3 rounded-lg font-medium flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"
                    onclick="return confirm('üö® CONFIRMA√á√ÉO FINAL:\n\nTem certeza ABSOLUTA que deseja deletar o cliente {{ cliente.nom_complet }}?\n\nEsta a√ß√£o √© IRREVERS√çVEL e todos os dados ser√£o perdidos permanentemente.\n\nDigite OK para confirmar ou Cancelar para voltar.')">
                <i class="fas fa-trash"></i>
                Sim, Deletar Permanentemente
            </button>
        </form>

        <div class="mt-6 text-center">
            <p class="text-sm text-gray-600 bg-gray-50 rounded-lg p-3 border border-gray-200">
                üí° <strong>Dica:</strong> Se voc√™ n√£o tem certeza, considere apenas desativar o cliente ou convert√™-lo para prospect ao inv√©s de deletar.
            </p>
        </div>
    </div>
</div>
{% endblock %}
